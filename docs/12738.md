# Rails 枚举

> 原文:[https://www.educba.com/rails-enum/](https://www.educba.com/rails-enum/)

![Rails Enum](../Images/9a696fb8671864b2fb1a4cb6a16834b3.png)

<noscript><img class="alignnone size-full wp-image-522397" src="../Images/9a696fb8671864b2fb1a4cb6a16834b3.png" alt="Rails Enum" width="900" height="500" srcset="https://cdn.educba.com/academy/wp-content/uploads/2022/02/Rails-Enum.jpg 900w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/Rails-Enum-300x167.jpg 300w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/Rails-Enum-768x427.jpg 768w" sizes="(max-width: 900px) 100vw, 900px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2022/02/Rails-Enum.jpg"/></noscript>

## Rails 枚举的定义

Rails 枚举是 Ruby rails 编程中使用的一种数据类型。此数据类型包含一组命名值。当一个客户端需要创建一个属性并需要将它赋给一个不太可用的值时，那么在这段时间内使用 enum。我们可以为状态等属性定义一个枚举。对于此属性，可能的值为“已存档”、“待定”或“活动”。简而言之，enum 是 ruby rails 编程中命名值的集合。额外的特性是父类中的枚举也可以在子类中被访问。

### 什么是 rails enum？

枚举是遍历对象的过程。当属性(一组值)和方法之间有重叠时，对象是可枚举的。如果我们在一个数组上调用每个方法，而没有为它的每个元素指定一个要运行的块，我们将得到一个枚举器的实例。将一个属性从其他几个现有值中分配给任何人的过程称为枚举。

<small>网页开发、编程语言、软件测试&其他</small>

### 为什么我们要使用枚举？

如果客户正在设计一个关系图或一些基于网络的图，并且客户需要对现有的图进行一些新的额外升级，在其他编程语言中，这并不容易。因为在图中会出现几个区间或域。因此，模型可能包含不同类型的多个属性。这里的需求就像从现有的值中分配一个属性给另一个属性。这里我们需要枚举。属性意味着一组恒定的值。Rails 版将支持 enum 数据类型。

enum 在 rails 中的主要用途是将 enum 添加到现有的模型中。例如，我们可以将这个过程比作向可用表中添加一列。它们有助于指定模型的类型。正如我们之前讨论的，枚举将有助于值到整数的映射。由于枚举是属性或常量，它们不会改变，必须事先定义。因此，我们可以使用枚举，只有我们有一个大的预定义类型。用一个活生生的例子来更清楚地解释，如果一个商品出现在超市，它可以属于水果或蔬菜类别，而不能同时属于两者。同样，如果一个属性属于同一个值，那么它只属于一组特定的数据。

### 如何使用 rails enum？

让我们看一个创建枚举的简单例子。

![Rails Enum 1](../Images/bce6d42f8849742e9dc8d8b7bf06b9d7.png)

<noscript><img class="alignnone wp-image-522302 size-full" src="../Images/bce6d42f8849742e9dc8d8b7bf06b9d7.png" alt="Rails Enum 1" width="602" height="135" srcset="https://cdn.educba.com/academy/wp-content/uploads/2022/02/d.png 602w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/d-300x67.png 300w" sizes="(max-width: 602px) 100vw, 602px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2022/02/d.png"/></noscript>

让我们看看如何通过使用哈希以另一种方式编写相同的内容。

![Rails Enum 2](../Images/ec9b58c80421a523cc29acc437f95bbb.png)

<noscript><img class="alignnone wp-image-522303 size-full" src="../Images/ec9b58c80421a523cc29acc437f95bbb.png" alt="Rails Enum 2" width="603" height="128" srcset="https://cdn.educba.com/academy/wp-content/uploads/2022/02/f.png 603w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/f-300x64.png 300w" sizes="(max-width: 603px) 100vw, 603px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2022/02/f.png"/></noscript>

因此枚举是 rails 的约定。另一个好处是，它可能有助于未来的开发者理解你所写的内容。

使用枚举的一些提示:

1.枚举应该使用哈希而不是数组来定义。这允许你控制整数。
2。创建枚举时，避免使用连续的整数。使用 10、20、30…而不是 1、2、3…这为将来添加键/值提供了额外的空间。如果蔬菜是 20，我们想添加根菜，我会把它放在列表的开始，而不是在最后。

### 创建 rails 枚举

让我们看一个创建 rails 枚举的基本例子。在这个例子中，我们看到了如何将一个枚举添加到已经可用的模型中。第一步是创建适当的迁移。我们要添加的列应该是整数类型的属性。

![Rails Enum 3](../Images/4158e910de76b541fa5f60c085ef7062.png)

<noscript><img class="alignnone wp-image-522304 size-full" src="../Images/4158e910de76b541fa5f60c085ef7062.png" alt="Rails Enum 3" width="599" height="50" srcset="https://cdn.educba.com/academy/wp-content/uploads/2022/02/o.png 599w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/o-300x25.png 300w" sizes="(max-width: 599px) 100vw, 599px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2022/02/o.png"/></noscript>

![Rails Enum 4](../Images/44160ad1a3810ccaabb3050e4ad99a01.png)

<noscript><img class="alignnone wp-image-522305 size-full" src="../Images/44160ad1a3810ccaabb3050e4ad99a01.png" alt="Rails Enum 4" width="600" height="182" srcset="https://cdn.educba.com/academy/wp-content/uploads/2022/02/h.png 600w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/h-300x91.png 300w" sizes="(max-width: 600px) 100vw, 600px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2022/02/h.png"/></noscript>

在这之后，我们必须在模型中声明 enum 属性。

![Rails Enum 5](../Images/c1a580ae5571dc9b5f1ae76e1913aafa.png)

<noscript><img class="alignnone wp-image-522306 size-full" src="../Images/c1a580ae5571dc9b5f1ae76e1913aafa.png" alt="Rails Enum 5" width="604" height="110" srcset="https://cdn.educba.com/academy/wp-content/uploads/2022/02/t.png 604w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/t-300x55.png 300w" sizes="(max-width: 604px) 100vw, 604px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2022/02/t.png"/></noscript>

### enum 的基本用途:

我们可以在以下情况下使用枚举:

**1。用于检查等式。要检查客户目前是否在使用以下代码。**

`customer.status == 'present'`

**2。为了更新枚举，我们必须使用下面的代码集。**

`customer.archived! # same as customer.update(status: :archived)`

**3。范围:**

我想谈谈另一种类型的助手，即示波器。基本上，我们使用查询“where”。

`Customer.where(status: 'active')`

在这种情况下，如果我们使用查询 where，那么我们可以通过以下方式获得预期的结果:

`Customer.active`

### Rails 枚举模型

Rails 模型中的 enum 方法可供您使用。它接受一个以列名作为键的散列和第二个以映射到整数的状态作为值的散列。

**用户型号:**

既然用户模型和状态栏已经准备好使用 Rails 动态构建的方法，我们就来玩玩吧。我们需要数据库中的一些测试记录来运行测试。在控制台中键入以下代码:

![x](../Images/58b1c7c6309beb2bc49a39a8fa86d976.png)

<noscript><img class="alignnone size-full wp-image-522307" src="../Images/58b1c7c6309beb2bc49a39a8fa86d976.png" alt="x" width="603" height="57" srcset="https://cdn.educba.com/academy/wp-content/uploads/2022/02/x.png 603w, https://cdn.educba.com/academy/wp-content/uploads/2022/02/x-300x28.png 300w" sizes="(max-width: 603px) 100vw, 603px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2022/02/x.png"/></noscript>

正如你在上面的代码中看到的，即使 popularity 列存储的是整数，我也可以因为值而跳过图像，这样它就可以有效地存储在数据库中。这是因为 Rails 知道 popularity 是一个枚举，它会自动替换这些值。

因此，当我们使用属性时，枚举是非常有用的。这个博客解释了 Ruby rails 枚举的各个方面。他们也有自己的优势。这里的缺点是，我们只能使用预定义的属性。我们已经看到，属性是一组整数。使用 ruby rails 枚举有用户定义的方法。它们是用户定义的。此外，我们看到了枚举的不同用法。Ruby rails 枚举只能在 rails 编程中使用。我们还看到了一些关于为 ruby rails 使用 enum 的技巧。rails 的其他用途是检查等式，它们有自己的作用域，我们也可以更新枚举。它们主要是特定于属性的。

### 结论

简而言之，这就是枚举。它们适用于指定模型实例可用的类型。它们是框架(Rails)的属性，而不是语言的属性，不像另一种语言。然而，它们与 Rails 的集成提供了独特的好处，比如在保存/加载数据时，字符串和整数之间的自动转换。

### 推荐文章

这是一个关于 Rails Enum 的指南。在这里，我们讨论定义，什么是 rails 枚举，为什么我们使用枚举，代码实现的例子。您也可以看看以下文章，了解更多信息–

1.  [铁轨的优点](https://www.educba.com/advantages-of-rails/)
2.  [Rails vs PHP](https://www.educba.com/rails-vs-php/)
3.  [轨道命令](https://www.educba.com/rails-commands/)
4.  [Ruby vs Ruby On Rails](https://www.educba.com/ruby-vs-ruby-on-rails/)

<footer class="entry-footer">

<aside class="sidebar sidebar-primary widget-area" role="complementary" aria-label="Primary Sidebar">Primary Sidebar</aside>

</footer>