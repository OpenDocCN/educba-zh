# 边界网关协议

> 原文:[https://www.educba.com/border-gateway-protocol/](https://www.educba.com/border-gateway-protocol/)

![Border Gateway Protocol](../Images/669048791e3772fc8b0fb672d8ab0e40.png)

<noscript><img class="alignnone size-full wp-image-414253" src="../Images/669048791e3772fc8b0fb672d8ab0e40.png" alt="Border Gateway Protocol" width="900" height="500" srcset="https://cdn.educba.com/academy/wp-content/uploads/2020/09/Border-Gateway-Protocol.jpg 900w, https://cdn.educba.com/academy/wp-content/uploads/2020/09/Border-Gateway-Protocol-300x167.jpg 300w, https://cdn.educba.com/academy/wp-content/uploads/2020/09/Border-Gateway-Protocol-768x427.jpg 768w" sizes="(max-width: 900px) 100vw, 900px" data-original-src="https://cdn.educba.com/academy/wp-content/uploads/2020/09/Border-Gateway-Protocol.jpg"/></noscript>

## 边界网关协议简介

边界网关协议(BGP)是一种使用路径矢量路由的域间路由协议。它首次出现于 1989 年，已经经历了四个版本。它是一种标准化的外部网关协议，用于在互联网上的自治系统之间交换路由和可达性信息。它被归类为矢量协议。它也被归类为距离矢量路由协议。边界网关协议使用无类域间路由地址。即定义目的地地址，使用 BGPuses 前缀、地址和比特数(前缀长度)来更新消息。

### BGP 中自治系统的类型

互联网被分成称为自治系统的分层域。自治系统分为三类，即存根 AS 多宿主 AS 和中转 AS。

<small>网页开发、编程语言、软件测试&其他</small>

*   **存根 as:** 存根 AS 只有一个到另一个 AS 的连接，域间数据流量只能在 AS 中创建或终止。AS 中的主机可以向其他 AS 发送数据流量。AS 中的主机可以从其它 AS 中的主机接收数据流量。存根控件可以是源或接收器。
*   **多宿主 AS:** 它有多个到其他 AS 的连接，但它可以是数据流量的源或接收器。它可以向一个以上的 as 发送数据业务，它可以从一个以上的 as 接收数据业务。它不允许瞬时流量，即不允许数据从一个 AS 传到另一个 AS。
*   **Transit AS:** 它是一个多宿主 AS，也允许瞬时流量。

### 边界网关协议会话

在边界网关协议中，两台路由器之间的信息交换通过会话进行。会话是在两台 BGP 路由器之间建立的连接，用于交换路由信息。边界网关协议有两种类型的会话，一种是外部 BGP 会话，另一种是内部 BGP 会话。

外部边界网关协议会话。外部 BGP 会话用于在属于两个不同自治系统的两个用户节点之间交换信息。内部边界网关协议会话:内部 BGP 会话用于在自治系统内部的两个用户节点之间交换信息。

#### 1.边界网关协议报头分组

所有 BGP 数据包共享相同的公共报头。标题中的字段如下。

*   **标记:**为 16 字节字段，保留用于认证。
*   **长度:**2 字节字段，定义了包括报头在内的整个报文的长度。
*   **类型:**1 字节字段，定义包的类型。

#### 2.边界网关协议消息

有四种类型的边界网关协议消息，它们是打开消息、更新消息、保持活动消息和通知消息。

##### 打开邮件

为了创建邻居关系，运行 BGP 的路由器打开与邻居的 TCP 连接，并发送 open 消息。如果邻居接受邻居关系，它会以 keepalive 消息作为响应，这意味着这两台路由器之间已经建立了连接。打开的消息具有以下字段

*   **公共头:**这个头和我们之前讨论过的一样。在这种情况下，类型值为 1。
*   **版本:**定义 BGP 版本的 1 字节字段。
*   **我的自治系统:**这是一个 2 字节的字段，定义了一个自治系统的编号。
*   **保持时间:**这是一个 2 字节的字段，定义了在一方从另一方接收到 keepalive 或 update 消息之前可以经过的第二个事实的最大数量。如果路由器在保持时间内没有收到这些消息中的一条，则该参与方被视为失效。
*   **BGP 标识符:**这是一个 4 字节的字段，定义了发送 open 消息的路由器。
*   **选项长度:**打开的消息可能包含一些选项参数。如果有任何选项，该值将被设置为 1，否则，它将被设置为 0。
*   **选项参数:**选项参数有两个子字段，一个是参数的长度，一个是参数值。

##### 更新消息

更新消息被称为边界网关协议的核心。路由器使用它来撤销先前已经通告的目的地，通告到新目的地的路由，或者两者都通告。边界网关协议可以撤销先前通告的几个目的地，但是它只能在单个更新消息中通告一个新的目的地。更新消息具有以下字段

*   **公共标题:**标题与我们之前讨论的相同。在这种情况下，类型值为 2。
*   **不可行路径长度:**这是一个 2 字节的字段，定义了下一个字段的长度。
*   **撤销长度:**列出了所有必须从先前通告列表中删除的路由。
*   **路径属性长度:**2 字节字段，定义下一个字段的长度。
*   **路径属性:**它定义了到达网络的路径的属性，该网络的可达性被通告。
*   **网络层可达性信息:**定义了该消息实际通告的网络。

##### 保持活动消息

运行边界网关协议的路由器必须定期交换 keepalive 消息，以告知彼此它们是活动的。它包括一个墨色的字段，即公共标题。标题与我们之前讨论过的相同。在这种情况下，类型值为 3。

##### 通知消息

每当检测到错误或路由器想要关闭连接时，路由器都会发送通知消息。通知消息包含以下字段

*   **公共头:**这个头和我们之前讨论过的一样。在这种情况下，类型值为 4。
*   **错误代码:**1 字节字段，定义错误类别。
*   **错误子码:**它是一个 1 字节的字段，定义了每个类别中的错误类型。
*   **错误数据:**用于给出关于错误的更多诊断信息。

### 推荐文章

这是一个边界网关协议指南。这里我们还讨论了 BGP 中自治系统的介绍和类型，以及边界网关协议会话。您也可以看看以下文章，了解更多信息–

1.  [路由协议类型](https://www.educba.com/routing-protocols-types/)
2.  [路由协议](https://www.educba.com/routing-protocol/)
3.  [什么是通用网关接口？](https://www.educba.com/what-is-common-gateway-interface/)
4.  [什么是网关？](https://www.educba.com/what-is-gateway/)

<footer class="entry-footer">

<aside class="sidebar sidebar-primary widget-area" role="complementary" aria-label="Primary Sidebar">Primary Sidebar</aside>

</footer>