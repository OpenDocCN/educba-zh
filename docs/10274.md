# 库伯内特斯法兰绒

> 原文：<https://www.educba.com/kubernetes-flannel/>

![kubernetes flannel](img/b6605ea1f943a398f6f4682acd85bc5b.png)



## kubernetes 法兰绒简介

Kubernetes 中的法兰绒是与容器一起使用的虚拟层，它基本上只为容器而设计。我们有一个利用法兰绒虚拟层的 OpenShift 容器。我们有默认的 SDN，它代表软件定义的网络，我们可以使用这个绒布来代替这些组件。它还有助于从一个容器到另一个容器的路由，我们可以通过它的体系结构设计来了解和详细查看。它由不同的节点组成，这些节点被称为 flannelId，每个 flannelId 负责完成特定的任务。在教程的下一部分，我们将研究它的内部工作方式，以及如何让初学者更好地理解它。

### 法兰绒联网怎么用？

为此，我们将进行法兰绒网络设置，但我们将对此进行一些配置，这将在本节中看到，所以让我们开始看下面的内容；

<small>网页开发、编程语言、软件测试&其他</small>

1)首先，我们将了解并设置 Kubernetes 集群，这可以通过使用法兰绒附加组件来完成。这个插件将帮助我们的 Kubernetes 集群正常运行，我们还将需要 pod 网络来帮助我们在 pod 之间进行通信。

2)这不是 Kubernetes 提供的唯一的网络附加组件，它具有帮助我们创建集群的网络附加组件的数量，但是在本文中，我们将首先使用和设置法兰绒网络，所以让我们看一看。

3)首先尝试为我们的每台服务器设置 sysctl 值，这也包括主模式。

a)运行以下命令为服务器设置 sysctl 值:sudo tee -a /etc/sysctl.conf

b)要查看更改或永久应用更改，我们将运行以下命令。这将适用于我们在 sysctl.confg 文件中所做的更改。

`sudo sysctl -p`

c)我们将对本文上一节中已经讨论过的所有集群进行这些更改。

d)现在，我们将利用法兰绒. yml 文件，该文件帮助我们创建不同的对象，从而帮助我们正确运行法兰绒。我们必须在主节点上而不是在集群节点上进行这些步骤更改，这是这里要添加的重要一点。

`kubectl apply -f`

https://raw.githubusercontent.com/coreos/flannel/bc79dd1505b0c8681ece4de4c0d86c5cd2643275/Documentation/kube-flannel.yml

e)要验证是否创建了不同类型的对象，我们可以在命令提示符下运行以下命令；

`kubectl get nodes`

f)运行该命令后，我们可以很容易地看到所有集群和主节点都在运行，并处于就绪状态。这将告诉我们我们的集群是否已经正确设置，这是一个验证步骤。

g)如果您想要验证法兰绒的 pods，运行以下命令，这将告诉 pods 是否正常运行 kubectl get pods -n Kube-system

### Kubernetes 法兰绒模型

在本节中，我们将借助流程图和图表来了解法兰绒模型。这将有助于我们更好地理解模型，所以让我们开始陈述，见下文；

1)这利用了 host-gw，它帮助我们从一个容器移动或路由到另一个容器。

2)它由几个节点组成，这个节点进一步包含了 pod 等。

3)每个主机都与负责多项任务的法兰绒 id 相关联。

a)它帮助我们管理几个集装箱之间的路线，即从一个集装箱到另一个集装箱。

b)它帮助我们在每台主机上创建唯一的子网

c)它已经为主机上的每个容器分配了 IP 地址。

4)我们可以看到下图来理解 flannel 模型，它有助于我们理解利用 flanneId 从一个容器到另一个容器的数据流。为了更清楚起见，见下文；

### Kubernetes 交通路线

在用于流量路由的 Kubernetes 中，我们利用服务拓扑，这种拓扑帮助我们路由流量，它基于集群的节点拓扑。利用这一点，我们可以轻松地将流量路由到位于同一节点上的特定端点，或者它们是否位于同一可用性区域。利用这一点，我们可以在不同的节点之间路由流量。

为此，我们利用流量感知拓扑，默认情况下，流量将通过后端服务的 nodeId 或 cluserId 路由，但从 Kubernetes 1.7 开始，现在可以将流量路由到运行在同一节点上的 pod。

1)服务拓扑:正如我们已经知道的，它有助于我们控制流量，如果在我们的服务上启用了此功能，那么我们可以通过使用拓扑关键字来路由流量。它尝试将节点的值与标签匹配，如果没有值与第一个标签匹配，它将转到第二个节点，依此类推。

**法兰绒选项**

下面提到了一些选择；

*   网络
*   后端
*   SubnetMax
*   SubnetMin
*   子网

我们可以使用 json 格式来指定，如下所示；

**例如:**

`{
"Network": "",
"SubnetLen": ,
"SubnetMin": "",
"SubnetMax": "",
"Backend": {
"Type": "",
"Port":
}
}`

**法兰绒网络空间**

正如我们已经知道的，法兰绒网络空间是由几个相互联系的节点组成的，这个节点内部包含了作为容器本身的 pod。让我们看一下这个图表，以便更好地理解它；

**图表:**

1)此处 pos 充当最小单位。

2) Pod 可以包含多个容器

3)此外，pod 共享相同的网络空间，这意味着它们都使用相同的网络接口连接。

### 结论

我们已经在 Kubernetes 中讨论了关于法兰绒的所有要点，通读这篇文章将有助于您以更好的方式设置和配置法兰绒服务。

### 推荐文章

这是 kubernetes 法兰绒指南。在这里，我们讨论内部工作，以及如何使用它，让初学者更好地理解这一点。您也可以看看以下文章，了解更多信息–

1.  [Kubernetes 自动缩放](https://www.educba.com/kubernetes-autoscaling/)
2.  [Kubernetes 复制控制器](https://www.educba.com/kubernetes-replication-controller/)
3.  [立方注释](https://www.educba.com/kubernetes-annotations/)
4.  [Kubernetes 部署](https://www.educba.com/kubernetes-deployment/)





